# Тестовое приложение просмотра документов и добавления аннотаций

Проект развернут на angular 20 без использования дополнительной системы сборки.

## Требования к инструментам


```
node.js: ^20.19.0 || ^22.12.0 || ^24.0.0
```

## Запуск

```
npm ci
ng serve
```

## Описание

Проект разрабатывается на архитектуре [Feature-Sliced Design](https://feature-sliced.design/), при этом названия сегментов оформлены в стиле Angular.
Feature-Sliced Design задаёт чёткую иерархию уровней приложения. Такая организация обеспечивает модульность и предсказуемость структуры: высокоуровневые слайсы собираются из более мелких, а низкоуровневые части могут переиспользоваться в разных контекстах. В итоге проект гибче масштабируется.

Для масштабирования документа используется css-свойство zoom вместо transform scale. В отличие от transform, zoom не анимируется, зато помогает без лишних усилий повторить поведение масштабирования страницы браузера в плане положения скролла страницы и ее размера. Правда, в процессе оказалось, что в Firefox не все так гладко с zoom. У FF мало пользователей, поэтому в зависимости от требований можно было бы доработать масштабирование или оставить как есть.

Перемещение аннотаций реализовано с помощью pointer-событий, это обеспечивает кросплатформенность. Например, drag-n-drop события поддерживаются не всеми платформами.

Аннотация создается точечным кликом по документу. При введении текста в нее она автоматически увеличивается. Нажатием клавиши escape снимается фокус с аннотации. Если с пустой аннотации снять фокус, она удаляется.

Засчет использования transform translate вместо left + top удалось несколько оптимизировать рендеринг страницы при перемещении аннотаций. Кроме того, transform-анимации плавнее за счет субпиксельного сглаживания.

Протестировано на последних версиях chrome, safari, firefox.

Так же некоторые глобальные типы в проекте дополнены, чтобы сделать код местами чуть лаконичнее.

По стилю кода, я бы в дальнейшем донастроил линтер + прекоммит хук, автоформатирование. И покрытие тестами.

Из дополнительных трудностей могу отметить, что метод getBoundingClientRect элемента, масштабированного через css-свойство zoom, в chrome возвращает размеры в соответствии с заданным масштабом, а в safari - нет.
